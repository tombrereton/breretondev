---
import { CollectionEntry, getCollection } from "astro:content";
import Layout from "../../layouts/Layout.astro";
import Card from "../../components/Card.astro";
import TextPageTitle from "../../components/TextPageTitle.astro";
import Article from "../../components/Article.astro";

export async function getStaticPaths() {
  const posts = await getCollection("blog");

  return posts.map((post) => {
    return {
      params: {
        slug: post.data.slugLink,
      },
      props: {
        post,
      },
    };
  });
}

interface Props {
  post: CollectionEntry<"blog">;
}

const { post } = Astro.props;
const { Content } = await post.render();
---

<Layout title={`Tom Brereton | $`}>
  <header>
    <TextPageTitle title={post.data.title} subtitle={post.data.summary} />
  </header>

  <Article>
    <article class="prose prose-invert md:prose-lg prose-img:m-auto prose-code:m-auto min-w-full">
      <Content />
    </article>
  </Article>
  <ul class="tags">
    {post.data.tags?.map((tag) => <li>{tag}</li>)}
  </ul>
  <p>
    <a href="/">&larr; back to all posts</a>
  </p>
</Layout>
